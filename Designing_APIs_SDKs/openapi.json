{
    "openapi":"3.1.1",
    "info": {
      "title":"Financial metrics API",
      "version":"1.0"
    },
    "servers": [
      {"url":"https://api.example.com/v1"}
    ],
    "components": {
        "schemas": {
            "Month": {
                "type": "string",
                "title": "Month",
                "description": "Calendar month in YYYY-MM format",
                "pattern": "^\\d{4}-(0[1-9]|1[0-2])$",
                "examples": ["2025-09"]
            },
            "CountryCode": {
                "type": "string",
                "title": "Country Code",
                "description": "ISO 3166-1 alpha-2 country code",
                "pattern": "^[A-Z]{2}$",
                "examples": ["US", "GB", "DE"]
            },
            "PostalCode": {
                "type": "string",
                "title": "Postal Code",
                "description": "Postal/ZIP code",
                "maxLength": 16,
                "pattern": "^[A-Za-z0-9][A-Za-z0-9\\-\\s]{0,14}[A-Za-z0-9]$",
                "examples": ["94105", "SW1A 1AA", "75008"]
            },
            "LastChangedSince": {
                "type": "string",
                "title": "Last Changed Since",
                "description": "RFC 3339/ISO 8601 timestamp (UTC) to return records last changed on or after this instant.",
                "format": "date-time",
                "examples": ["2025-09-27T14:32:00Z"]
            },            
            "Metric": {
                "type": "object",
                "properties": {
                    "Month": { "$ref": "#/components/schemas/Month" }
                },
                "required": ["Month"],
                "additionalProperties": false
            },
            "ProblemDetails": {
                "type": "object",
                "properties": {
                "type": {
                    "type": "string",
                    "format": "uri-reference",
                    "description": "URI reference identifying the problem type."
                },
                "title": {
                    "type": "string",
                    "description": "A short, human-readable summary of the problem type."
                },
                "status": {
                    "type": "integer",
                    "description": "HTTP status code for this error occurrence."
                },
                "detail": {
                    "type": "string",
                    "description": "Explanation specific to this occurrence of the problem."
                },
                "instance": {
                    "type": "string",
                    "format": "uri-reference",
                    "description": "URI reference identifying the specific occurrence of the problem."
                }
                },
                "required": ["title", "status"]
            }
    },
    "responses": {
        "ProblemDetails": {
            "description": "Problem Details using RFC 9457",
            "content": {
                "application/json": {
                    "schema": { "$ref": "#/components/schemas/ProblemDetails" }
                }
            }
        }
    }

    },
    "paths": {
        "/metrics": {
            "get": {
                "description": "Get metrics information",
                "parameters": [
                    {
                        "name": "Month",
                        "in": "query",
                        "required": false,
                        "schema": { "$ref": "#/components/schemas/Month" }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of financial metrics",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Metric"
                                    },
                                    "title": "Response GET metrics"
                                }
                            }
                        }
                    },
                     "422": { "$ref": "#/components/responses/ProblemDetails" },
                     "500": { "$ref": "#/components/responses/ProblemDetails" }
            }
        }
    }
  }
}